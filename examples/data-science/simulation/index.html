<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-20Z3J1CR22"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-20Z3J1CR22');
    </script>
    <link rel="index" title="Index" href="../../../genindex/" /><link rel="search" title="Search" href="../../../search/" /><link rel="next" title="Concepts" href="../../../concepts/" /><link rel="prev" title="Hyperparameter tuning" href="../ml_training/" />
        <link rel="canonical" href="https://burr.dagworks.io/examples/data-science/simulation/" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Simulations - Burr</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=739e8c58" />
    <link rel="stylesheet" type="text/css" href="../../../_static/testimonials.css?v=bd684830" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-announcement-background: #ffba00;
  --color-announcement-text: #091E42;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: #ffba00;
  --color-announcement-text: #091E42;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: #ffba00;
  --color-announcement-text: #091E42;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../"><div class="brand">Burr</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../">
  
  
  <span class="sidebar-brand-text">Burr</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Burr</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting_started/">Get started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Get started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/why-burr/">Why Burr?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/install/">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/simple-example/">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/up-next/">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../">Cookbook</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Cookbook</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../simple/">üß∏ Toy examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of üß∏ Toy examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../simple/counter/">Counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../simple/cowsay/">Cowsay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../simple/choose-your-own-adventure/">Choose your own adventure</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../chatbots/">üìû Chatbots</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of üìû Chatbots</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../chatbots/basic-chatbot/">Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../chatbots/gpt-like-chatbot/">GPT-like multimodal chatbot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../chatbots/rag-chatbot-hamilton/">Conversational RAG with Burr and Hamilton</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../agents/">ü§ñ Agents</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of ü§ñ Agents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../agents/divide-and-conquer/">Divide and Conquer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../agents/agent-patterns/">Agent patterns</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../deployment/">‚úà Deployment</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of ‚úà Deployment</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/web-server/">Burr in a web server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/infrastructure/">Provisioning Infrastructure/Deploying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../deployment/monitoring/">Monitoring in Production</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guardrails/">üöß Guardrails / Tests</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of üöß Guardrails / Tests</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guardrails/creating_tests/">Creating Test Cases</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../">üß™ Data science</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of üß™ Data science</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ml_training/">Hyperparameter tuning</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Simulations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../concepts/">Concepts</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Concepts</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/overview/">Cheat Sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/sdlc/">SDLC with LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/actions/">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/state/">State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/state-machine/">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/transitions/">Transitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/tracking/">Tracking Burr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/state-persistence/">State Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/serde/">Serialization / Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/streaming-actions/">Streaming Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/state-typing/">Typing State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/hooks/">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/additional-visibility/">Additional Visibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/parallelism/">Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/recursion/">Recursive Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/sync-vs-async/">Sync vs Async Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../concepts/planned-capabilities/">Planned Capabilities</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../reference/">API reference</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of API reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/application/">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/application/#graph-apis">Graph APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/actions/">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/state/">State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/serde/">Serialization &amp; Deserialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/persister/">State Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/conditions/">Conditions/Transitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/tracking/">Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/visibility/">Tracing Inside Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/lifecycle/">Lifecycle API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/parallelism/">Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/typing/">Typing</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/integrations/">Integrations</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Integrations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/hamilton/">Hamilton</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/streamlit/">Streamlit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/opentelemetry/">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/traceloop/">Traceloop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/langchain/">Langchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/pydantic/">Pydantic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/haystack/">Haystack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/integrations/ray/">Ray</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/telemetry/">Usage analytics + data privacy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../contributing/">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Contributing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing/setup/">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing/iterating/">Developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing/architecture/">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing/contributing/">Contributing</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Burr Cloud</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://forms.gle/w9u2QKcPrztApRedA">Waitist</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RESOURCES</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://blog.dagworks.io/">Blog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/6Zy2DwP4f3">Discord community server</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dagworks-inc/burr">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://twitter.com/dagworks">Twitter</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/dagworks-inc/burr/blob/main/docs/examples/data-science/simulation.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/dagworks-inc/burr/edit/main/docs/examples/data-science/simulation.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="simulations">
<h1>Simulations<a class="headerlink" href="#simulations" title="Link to this heading">¬∂</a></h1>
<p>At a high level, simulations generally run over a set of time steps and maintain state.
The user then manages the state, which becomes the input to the next time step, as well
as output data to analyze. Burr provides a simple way for you to construct, manage, and
introspect the state of your simulation.</p>
<p>This example is a WIP ‚Äì see the placeholder/example sketch in the <a class="reference external" href="https://github.com/DAGWorks-Inc/burr/tree/main/examples/simulation">repository</a>.
We‚Äôre actively looking for contributors + ideas via <a class="reference external" href="https://github.com/DAGWorks-Inc/burr/issues/136">this issue</a> to track.</p>
<p>For instance:</p>
<section id="time-series-forecast">
<h2>Time-series Forecast<a class="headerlink" href="#time-series-forecast" title="Link to this heading">¬∂</a></h2>
<p>A time-series forecast will execute a computation (say, feature-engineering + a model) at each step for which the user is predicting. The
user will then store a history of data (predictions, raw data, etc‚Ä¶), and use that to pass into the next step in the simulation.</p>
<p>The merge into state + query from state capabilities can be complicated ‚Äì windowed operations, rolling averages, etc.. may all be useful,
and they may want to visualize simulations live (E.G. by tracking some metrics as it goes along). Burr is a natural way to persist this ‚Äì even
if it is just a few actions (<code class="docutils literal notranslate"><span class="pre">query_data</span></code>, <code class="docutils literal notranslate"><span class="pre">feature_engineer</span></code>, <code class="docutils literal notranslate"><span class="pre">forecast</span></code>), the persistence capabilities + hooks can allow
for logging to whatever live framework one wants to visualize, and centralizing the logic of reading from/writing to state.</p>
<p><img alt="diagram" src="../../../_images/_simulation.png" />.</p>
</section>
<section id="portfolio-construction">
<h2>Portfolio Construction<a class="headerlink" href="#portfolio-construction" title="Link to this heading">¬∂</a></h2>
<p>This is a special case of time-series forecasting, in which one wants to simulate a financial portfolio. Actions might be:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">query_data</span></code> - get data from state/load externally</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prepare_data</span></code> - format to something you can make predictions on</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">forecast</span></code> - runs a model to do stock-price fore asting</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">construct_portfolio</span></code> - uses the forecast to construct a portfolio</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">evaluate_portfolio</span></code> - evaluates the portfolio</p></li>
</ul>
<p>Each one of these could be a DAG using <a class="reference external" href="https://github.com/dagworks-inc/hamilton">Hamilton</a>, or running any custom code.</p>
</section>
<section id="multi-agent-simulation">
<h2>Multi-agent simulation<a class="headerlink" href="#multi-agent-simulation" title="Link to this heading">¬∂</a></h2>
<p>See <a class="reference external" href="https://hai.stanford.edu/news/computational-agents-exhibit-believable-humanlike-behavior">Stanford Smallville</a> for an example.
For multiple independent ‚Äúagents‚Äù, Burr could help model the way they interact. This could be multiplke Burr applications, applications called within
actions, or an action that loops over all ‚Äúusers‚Äù. We are still figuring out the best way to model this, so reach out if you have ideas!</p>
</section>
<section id="code-example">
<h2>Code example<a class="headerlink" href="#code-example" title="Link to this heading">¬∂</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains a stubbed out structure for one way of doing a simulation</span>
<span class="sd"> for forecasting purposes.</span>

<span class="sd">For more sophisticated forecasts where prediction of one timestep</span>
<span class="sd">depends on the previous timestep, you need to forecast on a per-step basis. So</span>
<span class="sd">you&#39;re effectively simulating the future at each step. This is a simple example of</span>
<span class="sd">how you might structure such a simulation.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tuple</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">burr.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">Application</span><span class="p">,</span> <span class="n">ApplicationBuilder</span><span class="p">,</span> <span class="n">State</span><span class="p">,</span> <span class="n">expr</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">burr.core.action</span><span class="w"> </span><span class="kn">import</span> <span class="n">action</span>


<span class="nd">@action</span><span class="p">(</span><span class="n">reads</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data_path&quot;</span><span class="p">],</span> <span class="n">writes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">prepare_data</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">State</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This would pull the data, prepare it, and return it.&quot;&quot;&quot;</span>
    <span class="c1"># pull data, prepare as necessary</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">_process_data</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;data_path&quot;</span><span class="p">])}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>


<span class="nd">@action</span><span class="p">(</span><span class="n">reads</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;simulation_start&quot;</span><span class="p">],</span> <span class="n">writes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">build_model</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">State</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This would fit the model on data before the simulation start date.&quot;&quot;&quot;</span>
    <span class="n">training_data</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">_fit_model</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="n">upto</span><span class="o">=</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;simulation_start&quot;</span><span class="p">])</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>


<span class="nd">@action</span><span class="p">(</span>
    <span class="n">reads</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;simulation_start&quot;</span><span class="p">,</span> <span class="s2">&quot;simulation_end&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;current_timestep&quot;</span><span class="p">],</span>
    <span class="n">writes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">forecast</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">State</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This action forecasts the next timestep in the simulation and appends it to data.&quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s2">&quot;simulation_start&quot;</span><span class="p">]</span>
    <span class="n">current_time_step</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;current_timestep&quot;</span><span class="p">,</span> <span class="n">start_time</span><span class="p">)</span>
    <span class="n">next_timestep</span> <span class="o">=</span> <span class="n">_forecast_timestep</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">current_time_step</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">_update_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">next_timestep</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="s2">&quot;current_timestep&quot;</span><span class="p">:</span> <span class="n">next_timestep</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">result</span><span class="p">)</span>


<span class="nd">@action</span><span class="p">(</span><span class="n">reads</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">],</span> <span class="n">writes</span><span class="o">=</span><span class="p">[])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">terminate</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">State</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is a terminal step that would save the forecast or do something else.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{},</span> <span class="n">state</span>


<span class="k">def</span><span class="w"> </span><span class="nf">application</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Application</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ApplicationBuilder</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_actions</span><span class="p">(</span><span class="n">prepare_data</span><span class="p">,</span> <span class="n">build_model</span><span class="p">,</span> <span class="n">forecast</span><span class="p">,</span> <span class="n">terminate</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_transitions</span><span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;prepare_data&quot;</span><span class="p">,</span> <span class="s2">&quot;build_model&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;build_model&quot;</span><span class="p">,</span> <span class="s2">&quot;forecast&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;forecast&quot;</span><span class="p">,</span> <span class="s2">&quot;forecast&quot;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s2">&quot;current_timestep&lt;simulation_end&quot;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s2">&quot;forecast&quot;</span><span class="p">,</span> <span class="s2">&quot;terminate&quot;</span><span class="p">,</span> <span class="n">expr</span><span class="p">(</span><span class="s2">&quot;current_timestep&gt;=simulation_end&quot;</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_state</span><span class="p">(</span>
            <span class="n">data_path</span><span class="o">=</span><span class="s2">&quot;SOME_PATH&quot;</span><span class="p">,</span>
            <span class="n">simulation_start</span><span class="o">=</span><span class="s2">&quot;some-value&quot;</span><span class="p">,</span>
            <span class="n">simulation_end</span><span class="o">=</span><span class="s2">&quot;some-end-value&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_entrypoint</span><span class="p">(</span><span class="s2">&quot;prepare_data&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span>


<span class="c1"># --- stubbed out functions to fill out for the simulation</span>
<span class="k">def</span><span class="w"> </span><span class="nf">_process_data</span><span class="p">(</span><span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function would read and process data from a file.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{}</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_fit_model</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">upto</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function would fit a model on data upto a certain date.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{}</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_forecast_timestep</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">current_timestep</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function would forecast the next timestep in the simulation given the model and data.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{}</span>


<span class="k">def</span><span class="w"> </span><span class="nf">_update_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">next_timestep</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function would update the data with the forecasted timestep.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{}</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">_app</span> <span class="o">=</span> <span class="n">application</span><span class="p">()</span>
    <span class="n">_app</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span>
        <span class="n">output_file_path</span><span class="o">=</span><span class="s2">&quot;statemachine&quot;</span><span class="p">,</span> <span class="n">include_conditions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span>
    <span class="p">)</span>
    <span class="c1"># you could run things like this:</span>
    <span class="c1"># last_action, result, state = _app.run(halt_after=[&quot;terminate&quot;])</span>

</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../../../concepts/">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Concepts</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../ml_training/">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Hyperparameter tuning</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Elijah ben Izzy, Stefan Krawczyk
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Simulations</a><ul>
<li><a class="reference internal" href="#time-series-forecast">Time-series Forecast</a></li>
<li><a class="reference internal" href="#portfolio-construction">Portfolio Construction</a></li>
<li><a class="reference internal" href="#multi-agent-simulation">Multi-agent simulation</a></li>
<li><a class="reference internal" href="#code-example">Code example</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=187304be"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>